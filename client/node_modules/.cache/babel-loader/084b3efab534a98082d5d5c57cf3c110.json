{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ydocs/Desktop/ccmeforrealthistime/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/ydocs/Desktop/ccmeforrealthistime/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import api from'../utils/api';import{setAlert}from'./alert';import{GET_PROFILE,PROFILE_ERROR,UPDATE_PROFILE,CLEAR_PROFILE,ACCOUNT_DELETED}from'./types';// Get current users profile\nexport var getCurrentProfile=function getCurrentProfile(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return api.get('/profile/me');case 3:res=_context.sent;dispatch({type:GET_PROFILE,payload:res.data});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);dispatch({type:PROFILE_ERROR,payload:{msg:_context.t0.response.statusText,status:_context.t0.response.status}});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x){return _ref.apply(this,arguments);};}();};// Get profile by ID\nexport var getProfileById=function getProfileById(userId){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return api.get(\"/profile/user/\".concat(userId));case 3:res=_context2.sent;dispatch({type:GET_PROFILE,payload:res.data});_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);dispatch({type:PROFILE_ERROR,payload:{msg:_context2.t0.response.statusText,status:_context2.t0.response.status}});case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};// Create or update profile\nexport var createProfile=function createProfile(formData,history){var edit=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var res,errors;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return api.post('/profile',formData);case 3:res=_context3.sent;dispatch({type:GET_PROFILE,payload:res.data});dispatch(setAlert(edit?'Profile Updated':'Profile Created','success'));if(!edit){history.push('/dashboard');}_context3.next=14;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](0);errors=_context3.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,'danger'));});}dispatch({type:PROFILE_ERROR,payload:{msg:_context3.t0.response.statusText,status:_context3.t0.response.status}});case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[0,9]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};// Add Wallet\nexport var addWallet=function addWallet(formData,history){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var res,errors;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return api.put('/profile/wallet',formData);case 3:res=_context4.sent;dispatch({type:UPDATE_PROFILE,payload:res.data});dispatch(setAlert('Wallet Added','success'));history.push('/dashboard');_context4.next=14;break;case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](0);errors=_context4.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,'danger'));});}dispatch({type:PROFILE_ERROR,payload:{msg:_context4.t0.response.statusText,status:_context4.t0.response.status}});case 14:case\"end\":return _context4.stop();}}},_callee4,null,[[0,9]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();};// Delete Wallet\nexport var deleteWallet=function deleteWallet(id){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return api.delete(\"/profile/wallet/\".concat(id));case 3:res=_context5.sent;dispatch({type:UPDATE_PROFILE,payload:res.data});dispatch(setAlert('Wallet Removed','success'));_context5.next=11;break;case 8:_context5.prev=8;_context5.t0=_context5[\"catch\"](0);dispatch({type:PROFILE_ERROR,payload:{msg:_context5.t0.response.statusText,status:_context5.t0.response.status}});case 11:case\"end\":return _context5.stop();}}},_callee5,null,[[0,8]]);}));return function(_x5){return _ref5.apply(this,arguments);};}();};// Delete account & profile\nexport var deleteAccount=function deleteAccount(){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!window.confirm('Are you sure? This can NOT be undone!')){_context6.next=12;break;}_context6.prev=1;_context6.next=4;return api.delete('/profile');case 4:dispatch({type:CLEAR_PROFILE});dispatch({type:ACCOUNT_DELETED});dispatch(setAlert('Your account has been permanently deleted'));_context6.next=12;break;case 9:_context6.prev=9;_context6.t0=_context6[\"catch\"](1);dispatch({type:PROFILE_ERROR,payload:{msg:_context6.t0.response.statusText,status:_context6.t0.response.status}});case 12:case\"end\":return _context6.stop();}}},_callee6,null,[[1,9]]);}));return function(_x6){return _ref6.apply(this,arguments);};}();};","map":{"version":3,"sources":["/Users/ydocs/Desktop/ccmeforrealthistime/client/src/actions/profile.js"],"names":["api","setAlert","GET_PROFILE","PROFILE_ERROR","UPDATE_PROFILE","CLEAR_PROFILE","ACCOUNT_DELETED","getCurrentProfile","dispatch","get","res","type","payload","data","msg","response","statusText","status","getProfileById","userId","createProfile","formData","history","edit","post","push","errors","forEach","error","addWallet","put","deleteWallet","id","delete","deleteAccount","window","confirm"],"mappings":"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","sourcesContent":["import api from '../utils/api';\nimport { setAlert } from './alert';\n\nimport {\n  GET_PROFILE,\n  PROFILE_ERROR,\n  UPDATE_PROFILE,\n  CLEAR_PROFILE,\n  ACCOUNT_DELETED,\n} from './types';\n\n// Get current users profile\nexport const getCurrentProfile = () => async (dispatch) => {\n  try {\n    const res = await api.get('/profile/me');\n\n    dispatch({\n      type: GET_PROFILE,\n      payload: res.data\n    });\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: { msg: err.response.statusText, status: err.response.status }\n    });\n  }\n};\n\n// Get profile by ID\nexport const getProfileById = (userId) => async (dispatch) => {\n  try {\n    const res = await api.get(`/profile/user/${userId}`);\n\n    dispatch({\n      type: GET_PROFILE,\n      payload: res.data\n    });\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: { msg: err.response.statusText, status: err.response.status }\n    });\n  }\n};\n\n// Create or update profile\nexport const createProfile = (formData, history, edit = false) => async (\n  dispatch\n) => {\n  try {\n    const res = await api.post('/profile', formData);\n\n    dispatch({\n      type: GET_PROFILE,\n      payload: res.data\n    });\n\n    dispatch(setAlert(edit ? 'Profile Updated' : 'Profile Created', 'success'));\n\n    if (!edit) {\n      history.push('/dashboard');\n    }\n  } catch (err) {\n    const errors = err.response.data.errors;\n\n    if (errors) {\n      errors.forEach((error) => dispatch(setAlert(error.msg, 'danger')));\n    }\n\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: { msg: err.response.statusText, status: err.response.status }\n    });\n  }\n};\n\n// Add Wallet\nexport const addWallet = (formData, history) => async (dispatch) => {\n  try {\n    const res = await api.put('/profile/wallet', formData);\n\n    dispatch({\n      type: UPDATE_PROFILE,\n      payload: res.data\n    });\n\n    dispatch(setAlert('Wallet Added', 'success'));\n\n    history.push('/dashboard');\n  } catch (err) {\n    const errors = err.response.data.errors;\n\n    if (errors) {\n      errors.forEach((error) => dispatch(setAlert(error.msg, 'danger')));\n    }\n\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: { msg: err.response.statusText, status: err.response.status }\n    });\n  }\n};\n\n// Delete Wallet\nexport const deleteWallet = (id) => async (dispatch) => {\n  try {\n    const res = await api.delete(`/profile/wallet/${id}`);\n\n    dispatch({\n      type: UPDATE_PROFILE,\n      payload: res.data\n    });\n\n    dispatch(setAlert('Wallet Removed', 'success'));\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: { msg: err.response.statusText, status: err.response.status }\n    });\n  }\n};\n\n// Delete account & profile\nexport const deleteAccount = () => async (dispatch) => {\n  if (window.confirm('Are you sure? This can NOT be undone!')) {\n    try {\n      await api.delete('/profile');\n\n      dispatch({ type: CLEAR_PROFILE });\n      dispatch({ type: ACCOUNT_DELETED });\n\n      dispatch(setAlert('Your account has been permanently deleted'));\n    } catch (err) {\n      dispatch({\n        type: PROFILE_ERROR,\n        payload: { msg: err.response.statusText, status: err.response.status }\n      });\n    }\n  }\n};\n"]},"metadata":{},"sourceType":"module"}